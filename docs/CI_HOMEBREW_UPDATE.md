# Homebrew Formula自動更新の設定

## 概要

GitHub Actionsを使用してHomebrewフォーミュラを自動的に更新するワークフローを設定しました。

## 動作方法

1. **自動実行**: GitHubでリリースを公開すると自動的に実行されます
2. **手動実行**: Actions画面から手動でタグを指定して実行することも可能です

## ワークフローの処理内容

1. リリースアセット（`confirm-pam-macos-amd64.tar.gz`）のURLを取得
2. アセットをダウンロードしてSHA256ハッシュを計算
3. `Formula/confirm-pam.rb`のURLとSHA256を更新
4. 変更をプルリクエストとして作成

## 必要な設定

### GitHub Settings

このワークフローは標準の`GITHUB_TOKEN`を使用するため、追加のシークレット設定は不要です。

ただし、以下の設定を確認してください：

1. **Settings > Actions > General**で以下を確認：
   - "Allow GitHub Actions to create and approve pull requests"が有効になっていること

2. **デフォルトの権限**：
   - `GITHUB_TOKEN`にはリポジトリへの書き込み権限が必要です

## 使用方法

### 自動実行（推奨）

1. 通常通りリリースを作成
2. リリースを公開すると自動的にワークフローが実行
3. プルリクエストが作成されるので、確認してマージ

### 手動実行

1. GitHub Actions画面に移動
2. "Update Homebrew Formula"ワークフローを選択
3. "Run workflow"をクリック
4. タグ（例：`v0.1.1`）を入力して実行

## トラブルシューティング

### プルリクエストが作成されない場合

1. Actions画面でワークフローの実行ログを確認
2. リリースアセットが正しくアップロードされているか確認
3. リポジトリの設定でActionsがプルリクエストを作成できる権限があるか確認

### SHA256が一致しない場合

- ワークフローは自動的に正しいSHA256を計算するため、手動での修正は不要です